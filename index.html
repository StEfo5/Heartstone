<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<style>
		.img {
			height: 270px;
			background-size: 100% 100%;
			transition:  0.5s;
		}
		.hp {
			position: absolute;
			top: 83%;
			left: 19.5%;
		}
		.dmg {
			position: absolute;
			top: 84%;
			left: 75.5%;
		}
		.bor {
			border: 8px solid black;
		}
		.vic {
			position: absolute;
			top: 325px;
			left: 190px;
			display: none;
		}
		.los {
			position: absolute;
			top: 325px;
			left: 190px;
			display: none;
		}
		.main {
			display: none;
			transition: 0.5s;
		}
		.start {
			transition: 0.5s;
		}
	</style>
</head>
<body style="background: #D05B5B">
	<div class="col-6 mx-auto bg-white">
		<div class="start text-center pt-4 pb-4 pl-4 pr-4">
			<h2 style="font-family: Arial;">
				Ты повелитель демонов. На твои землю пришел отряд мятежников во главе демона Азраиля. Теперь ты должен отстоять своё право на трон, использую силы своих подданных. В начале хода ты выбираешь одного из своих прислужников, нажав на его карту, и можешь использовать его навык. Далее у тебя есть выбор: ты можешь либо напасть на самого Азраиля, нажав на показатель его жизни (изначально 12), либо на его подданных, нажав на их карту. После твоего хода настает очередь Азраиля, после чего снова твоя и так далее, пока один из повелителей или все его подданные не погибнут.
			</h1>
			<button class="btn border text-white st mt-4" style="background: #D05B5B">
				<h2>
					Начать
				</h2>
			</button>
		</div>
		<div class="col-10 mx-auto main pb-3 pt-2">
			<div class="text-center">
				<button class="btn border text-white pb-0 " style="background: #D05B5B">
					<h5 class="en">
						12
					</h5>
				</button>
			</div>

			<div class="row mt-2">
				<div class="col-4">
					<div class="en1 img rounded bor">
						<div class="row">
							<h6 class="hp hpEn1">
								
							</h6>
							<h6 class="dmg dmgEn1">
								
							</h6>
						</div>
					</div>
				</div>
				<div class="col-4">
					<div class="en2 img rounded bor">
						<div class="row">
							<h6 class="hp hpEn2">
								
							</h6>
							<h6 class="dmg dmgEn2">
								
							</h6>
						</div>
					</div>
				</div>
				<div class="col-4">
					<div class="en3 img rounded bor">
						<div class="row">
							<h6 class="hp hpEn3">
								
							</h6>
							<h6 class="dmg dmgEn3">
								
							</h6>
						</div>
					</div>
				</div>
			</div>

			<div class="text-center mt-4">
				<button class="btn border text-white n" style="background: #D05B5B">
					Использовать навык
				</button>
			</div>
			
			<div class="row mt-4">
				<div class="col-4">
					<div class="pl1 img rounded bor">
						<div class="row">
							<h6 class="hp hpPl1">
								
							</h6>
							<h6 class="dmg dmgPl1">
								
							</h6>
						</div>
					</div>
				</div>
				<div class="col-4">
					<div class="pl2 img rounded bor">
						<div class="row">
							<h6 class="hp hpPl2">
								
							</h6>
							<h6 class="dmg dmgPl2">
								
							</h6>
						</div>
					</div>
				</div>
				<div class="col-4">
					<div class="pl3 img rounded bor">
						<div class="row">
							<h6 class="hp hpPl3">
								
							</h6>
							<h6 class="dmg dmgPl3">
								
							</h6>
						</div>
					</div>
				</div>
			</div>

			<div class="text-center mt-2">
				<button class="btn border text-white pb-0" style="background: #D05B5B">
					<h5 class="pl">
						12
					</h5>
				</button>
			</div>
		</div>
		<div class="vic border-success col-6 border rounded pb-3 pt-3">
			<h1 class="fin text-success text-center">
				Victory!
			</h1>
		</div>
		<div class="los border-danger col-6 border rounded pb-3 pt-3">
			<h1 class="fin text-danger text-center">
				Losing.
			</h1>
		</div>
	</div>
	<script>
		let plNum = 12;
		let enNum = 12;
		let plCard = 3;
		let enCard = 3;

		let en = document.querySelector('.en');
		let pl = document.querySelector('.pl');
		let los = document.querySelector('.los');
		let vic = document.querySelector('.vic');
		let main = document.querySelector('.main');
		let en1 = document.querySelector('.en1');
		let en2 = document.querySelector('.en2');
		let en3 = document.querySelector('.en3');
		let pl1 = document.querySelector('.pl1');
		let pl2 = document.querySelector('.pl2');
		let pl3 = document.querySelector('.pl3');
		let hpEn1 = document.querySelector('.hpEn1');
		let hpEn2 = document.querySelector('.hpEn2');
		let hpEn3 = document.querySelector('.hpEn3');
		let hpPl1 = document.querySelector('.hpPl1');
		let hpPl2 = document.querySelector('.hpPl2');
		let hpPl3 = document.querySelector('.hpPl3');
		let dmgEn1 = document.querySelector('.dmgEn1');
		let dmgEn2 = document.querySelector('.dmgEn2');
		let dmgEn3 = document.querySelector('.dmgEn3');
		let dmgPl1 = document.querySelector('.dmgPl1');
		let dmgPl2 = document.querySelector('.dmgPl2');
		let dmgPl3 = document.querySelector('.dmgPl3');
		let btn = document.querySelector('.n');
		let st = document.querySelector('.st');
		let start = document.querySelector('.start');

		let rand = function(x) {
			return 1 + Math.round(Math.random()*(x-1));
		}

		let e1 = {
			class: rand(4),
			hp: rand(7),
			dmg: rand(4)
		}
		let e2 = {
			class: rand(4),
			hp: rand(7),
			dmg: rand(4)
		}
		let e3 = {
			class: rand(4),
			hp: rand(7),
			dmg: rand(4)
		}
		let p1 = {
			class: rand(4),
			hp: rand(7),
			dmg: rand(4)
		}
		let p2 = {
			class: rand(4),
			hp: rand(7),
			dmg: rand(4)
		}
		let p3 = {
			class: rand(4),
			hp: rand(7),
			dmg: rand(4)
		}

		en1.style.backgroundImage = "url(" + e1.class + ".png)";
		hpEn1.innerHTML = e1.hp;
		dmgEn1.innerHTML = e1.dmg;

		en2.style.backgroundImage = "url(" + e2.class + ".png)";
		hpEn2.innerHTML = e2.hp;
		dmgEn2.innerHTML = e2.dmg;

		en3.style.backgroundImage = "url(" + e3.class + ".png)";
		hpEn3.innerHTML = e3.hp;
		dmgEn3.innerHTML = e3.dmg;

		pl1.style.backgroundImage = "url(" + p1.class + ".png)";
		hpPl1.innerHTML = p1.hp;
		dmgPl1.innerHTML = p1.dmg;

		pl2.style.backgroundImage = "url(" + p2.class + ".png)";
		hpPl2.innerHTML = p2.hp;
		dmgPl2.innerHTML = p2.dmg;

		pl3.style.backgroundImage = "url(" + p3.class + ".png)";
		hpPl3.innerHTML = p3.hp;
		dmgPl3.innerHTML = p3.dmg;

		let chit = function() {
			p3.dmg = 12;
		}

		st.onclick = function() {
			start.style.display = 'none';
			main.style.display = 'block';
		}

		let attack = function() {
			if(enNum > 0) {
				if (((e2.dmg <= e1.dmg && e3.dmg  <= e1.dmg) || (e1.dmg >= e2.dmg && e3.hp < 1) || (e1.dmg >= e3.dmg && e2.hp < 1) || (e2.hp < 1 && e3.hp < 1)) && e1.hp > 0){
					if (plNum < p1.hp + p2.hp + p3.hp) {
						plNum = plNum - e1.dmg;
						pl.innerHTML = plNum;
						if (plNum < 1) {
							main.style.opacity = '0';
							los.style.display = 'block';
						}
				
					}
					else {
						if (((p1.hp <= p2.hp && p1.hp <= p3.hp) || (p1.hp <= p2.hp && p3.hp < 1) || (p1.hp <= p3.hp && p2.hp < 1) || (p2.hp < 1 && p3.hp < 1)) && p1.hp > 0){
							p1.hp = p1.hp - e1.dmg;
							hpPl1.innerHTML = p1.hp;
							if (p1.hp < 1) {
								pl1.style.opacity = '0';
								plCard = plCard - 1;
								if (plCard == 0) {
									main.style.opacity = '0';
									los.style.display = 'block';
								}
							}
						}
						else {
							if ((p2.hp <= p3.hp || p3.hp < 1) && p2.hp > 0) {
								p2.hp = p2.hp - e1.dmg;
								hpPl2.innerHTML = p2.hp;
								if (p2.hp < 1) {
									plCard = plCard - 1;
									pl2.style.opacity = '0';
									if (plCard == 0) {
										main.style.opacity = '0';
										los.style.display = 'block';
									}
								}
							}
							else if (p3.hp > 0) {
								p3.hp = p3.hp - e1.dmg;
								hpPl3.innerHTML = p3.hp;
								if (p3.hp < 1) {
									pl3.style.opacity = '0';
									plCard = plCard - 1;
									if (plCard == 0) {
										main.style.opacity = '0';
										los.style.display = 'block';
									}
								}
							}
						}
					}
				}
				else {
					if (((e2.dmg >= e3.dmg && e2.dmg >= e1.dmg) || (e2.dmg >= e1.dmg && e3.hp < 1) || (e2.dmg >= e3.dmg && e1.hp < 1) || (e1.hp < 1 && e3.hp < 1)) && e2.hp > 0) {
						if (plNum < p1.hp + p2.hp + p3.hp) {
							plNum = plNum - e2.dmg;
							pl.innerHTML = plNum;
							if (plNum < 1) {
								main.style.opacity = '0';
								los.style.display = 'block';
							}
						}
						else {
							if (((p1.hp <= p2.hp && p1.hp <= p3.hp) || (p1.hp <= p2.hp && p3.hp < 1) || (p1.hp <= p3.hp && p2.hp < 1) || (p2.hp < 1 && p3.hp < 1)) && p1.hp > 0){
								p1.hp = p1.hp - e2.dmg;
								hpPl1.innerHTML = p1.hp;
								if (p1.hp < 1) {
									pl1.style.opacity = '0';
									plCard = plCard - 1;
									if (plCard == 0) {
										main.style.opacity = '0';
										los.style.display = 'block';
									}
								}
							}
							else {
								if ((p2.hp <= p3.hp || p3.hp < 1) && p2.hp > 0) {
									p2.hp = p2.hp - e2.dmg;
									hpPl2.innerHTML = p2.hp;
									if (p2.hp < 1) {
										plCard = plCard - 1;
										pl2.style.opacity = '0';
										if (plCard == 0) {
											main.style.opacity = '0';
											los.style.display = 'block';
										}
									}
								}
								else if (p3.hp > 0) {
									p3.hp = p3.hp - e2.dmg;
									hpPl3.innerHTML = p3.hp;
									if (p3.hp < 1) {
										pl3.style.opacity = '0';
										plCard = plCard - 1;
										if (plCard == 0) {
											main.style.opacity = '0';
											los.style.display = 'block';
										}
									}
								}
							}
						}
					}
					else if(e3.hp > 0) {
						if (plNum < p1.hp + p2.hp + p3.hp) {
							plNum = plNum - e3.dmg;
							pl.innerHTML = plNum;
							if (plNum < 1) {
								main.style.opacity = '0';
								los.style.display = 'block';
							}
						}
						else {
							if (((p1.hp <= p2.hp && p1.hp <= p3.hp) || (p1.hp <= p2.hp && p3.hp < 1) || (p1.hp <= p3.hp && p2.hp < 1) || (p2.hp < 1 && p3.hp < 1)) && p1.hp > 0){
								p1.hp = p1.hp - e3.dmg;
								hpPl1.innerHTML = p1.hp;
								if (p1.hp < 1) {
									pl1.style.opacity = '0';
									plCard = plCard - 1;
									if (plCard == 0) {
										main.style.opacity = '0';
										los.style.display = 'block';
									}
								}
							}
							else {
								if ((p2.hp <= p3.hp || p3.hp < 1) && p2.hp > 0) {
									p2.hp = p2.hp - e3.dmg;
									hpPl2.innerHTML = p2.hp;
									if (p2.hp < 1) {
										plCard = plCard - 1;
										pl2.style.opacity = '0';
										if (plCard == 0) {
											main.style.opacity = '0';
											los.style.display = 'block';
										}
									}
								}
								else if (p3.hp > 0) {
									p3.hp = p3.hp - e3.dmg;
									hpPl3.innerHTML = p3.hp;
									if (p3.hp < 1) {
										pl3.style.opacity = '0';
										plCard = plCard - 1;
										if (plCard == 0) {
											main.style.opacity = '0';
											los.style.display = 'block';
										}
									}
								}
							}
						}
					}
				}	
			}
		}

		pl1.onclick = function() {
			btn.onclick = function() {
				plNum = plNum - 2;
				pl.innerHTML = plNum;
				if (p1.class == 1) {
					p1.dmg = p1.dmg + p1.hp - 4;
					p1.hp = 4;
					hpPl1.innerHTML = p1.hp;
					dmgPl1.innerHTML = p1.dmg;
				}
				else if (p1.class == 2) {
					p1.dmg = rand(6);
					dmgPl1.innerHTML = p1.dmg;
				}
				else if (p1.class == 3) {
					p1.hp = p1.hp + p1.dmg - 2;
					p1.dmg = 2;
					hpPl1.innerHTML = p1.hp;
					dmgPl1.innerHTML = p1.dmg;
				}
				else {
					p1.hp = rand(9);
					hpPl1.innerHTML = p1.hp;
				}
			}
			en1.onclick = function() {
				e1.hp = e1.hp - p1.dmg;
				hpEn1.innerHTML = e1.hp;
				if (e1.hp < 1) {
					enCard = enCard - 1;
					en1.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en2.onclick = function() {
				e2.hp = e2.hp - p1.dmg;
				hpEn2.innerHTML = e2.hp;
				if (e2.hp < 1) {
					enCard = enCard - 1;
					en2.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en3.onclick = function() {
				e3.hp = e3.hp - p1.dmg;
				hpEn3.innerHTML = e3.hp;
				if (e3.hp < 1) {
					enCard = enCard - 1;
					en3.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en.onclick = function() {
				enNum = enNum - p1.dmg;
				en.innerHTML = enNum;
				if (enNum < 1) {
					main.style.opacity = '0';
					vic.style.display = 'block';
				}
				setTimeout(attack,1000);
			}
		}
		pl2.onclick = function() {
			btn.onclick = function() {
				plNum = plNum - 2;
				pl.innerHTML = plNum;
				if (p2.class == 1) {
					p2.dmg = p2.dmg + p2.hp - 4;
					p2.hp = 4;
					hpPl2.innerHTML = p2.hp;
					dmgPl2.innerHTML = p2.dmg;
				}
				else if (p2.class == 2) {
					p2.dmg = rand(6);
					dmgPl2.innerHTML = p2.dmg;
				}
				else if (p2.class == 3) {
					p2.hp = p2.hp + p2.dmg - 2;
					p2.dmg = 2;
					hpPl2.innerHTML = p2.hp;
					dmgPl2.innerHTML = p2.dmg;
				}
				else {
					p2.hp = rand(9);
					hpPl2.innerHTML = p2.hp;
				}
			}
			en1.onclick = function() {
				e1.hp = e1.hp - p2.dmg;
				hpEn1.innerHTML = e1.hp;
				if (e1.hp < 1) {
					enCard = enCard - 1;
					en1.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en2.onclick = function() {
				e2.hp = e2.hp - p2.dmg;
				hpEn2.innerHTML = e2.hp;
				if (e2.hp < 1) {
					enCard = enCard - 1;
					en2.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en3.onclick = function() {
				e3.hp = e3.hp - p2.dmg;
				hpEn3.innerHTML = e3.hp;
				if (e3.hp < 1) {
					enCard = enCard - 1;
					en3.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en.onclick = function() {
				enNum = enNum - p2.dmg;
				en.innerHTML = enNum;
				if (enNum < 1) {
					main.style.opacity = '0';
					vic.style.display = 'block';
				}
				setTimeout(attack,1000);
			}
		}
		pl3.onclick = function() {
			btn.onclick = function() {
				plNum = plNum - 2;
				pl.innerHTML = plNum;
				if (p3.class == 1) {
					p3.dmg = p3.dmg + p3.hp - 4;
					p3.hp = 4;
					hpPl3.innerHTML = p3.hp;
					dmgPl3.innerHTML = p3.dmg;
				}
				else if (p3.class == 2) {
					p3.dmg = rand(6);
					dmgPl3.innerHTML = p3.dmg;
				}
				else if (p3.class == 3) {
					p3.hp = p3.hp + p3.dmg - 2;
					p3.dmg = 2;
					hpPl3.innerHTML = p3.hp;
					dmgPl3.innerHTML = p3.dmg;
				}
				else {
					p3.hp = rand(9);
					hpPl3.innerHTML = p3.hp;
				}
			}
			en1.onclick = function() {
				e1.hp = e1.hp - p3.dmg;
				hpEn1.innerHTML = e1.hp;
				if (e1.hp < 1) {
					enCard = enCard - 1;
					en1.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en2.onclick = function() {
				e2.hp = e2.hp - p3.dmg;
				hpEn2.innerHTML = e2.hp;
				if (e2.hp < 1) {
					enCard = enCard - 1;
					en2.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en3.onclick = function() {
				e3.hp = e3.hp - p3.dmg;
				hpEn3.innerHTML = e3.hp;
				if (e3.hp < 1) {
					enCard = enCard - 1;
					en3.style.opacity = '0';
					if (enCard == 0) {
						s = 'You';
						vic.style.display = 'block';
						main.style.opacity = '0';
					}
				}
				setTimeout(attack,1000);
			}
			en.onclick = function() {
				enNum = enNum - p3.dmg;
				en.innerHTML = enNum;
				if (enNum < 1) {
					main.style.opacity = '0';
					vic.style.display = 'block';
				}
				setTimeout(attack,1000);
			}
		}
	</script>
</body>
</html>